# 国际化

## 语言编码

按照国际化语言编码标准，在系统中必须使用 `/^([a-z]{2})_([A-Z]{2})$/`匹配的语言编码格式

系统中也提供了相关的转化方法和逻辑，详细描述参看 [语言选择优先级](##语言选择优先级)

## 按需加载流程

1. 系统首次进入

   - 获取当前语言

   - 加载当前语言的公共模块

   - 加载当前模块的当前语言

2. 系统刷新

   - 获取当前语言

   - 加载当前语言的公共模块

   - 加载当前模块的当前语言

3. 切换页面

   - 获取要切换的模块名

   - 如果模块名存在，则不处理

   - 如果模块名不存在，则加载当前语言的当前模块

4. 修改语言

   - 追加修改后语言的默认模块和前的模块

## 语言选择优先级

1. url 存在 `language = { lang }` 则取该值

   > 必须是全字匹配的，格式不合法则转化后全字匹配

2. 获取浏览器默认语言

   - 全字匹配

   - 回退首选语言映射

> 部分浏览器返回的不会是详细的，所以要映射默认 例如： `zh` => `zh_CN`

3. 系统自定的[默认语言](./localConfig.ts#L3)
